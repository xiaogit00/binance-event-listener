2026-01-13 20:25:17 | INFO   | db.py::get_latest_group_id()          | ‚úèÔ∏è Trying to get the latest group_id
2026-01-13 20:25:17 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups?select=group_id&order=group_id.desc&limit=1 "HTTP/1.1 200 OK"
2026-01-13 20:25:17 | INFO   | db.py::get_latest_group_id()          | Retrieved data=[] count=0 from db
2026-01-13 20:25:17 | INFO   | db.py::get_latest_group_id()          | No latest groupId found from group_orders table
2026-01-13 20:25:18 | INFO   | binanceWebsocket.py::websocket_binance_event_listener() | Connecting to wss://fstream.binance.com/ws/VyKbW5FXBdgRSxyND7ww4KdCTjpoAEyeqSBJbpCsOWQG1Li7YFGdQmLrg9yyIslv
2026-01-13 20:25:18 | INFO   | binanceWebsocket.py::websocket_binance_event_listener() | ‚úÖ Connected to Binance event listening websocket
2026-01-13 20:25:24 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:25:24 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'TRADE_LITE', 'E': 1768307124289, 'T': 1768307124289, 's': 'SOLUSDT', 'q': '0.04', 'p': '0.0000', 'm': False, 'c': 'aos_coin_7VFAIgtKAvo5wDpxssqV', 'S': 'BUY', 'L': '141.8700', 'l': '0.04', 't': 3075223848, 'i': 189088390711}
2026-01-13 20:25:24 | INFO   | event_handler.py::event_parser()      | Ignoring events of type TRADE_LITE
2026-01-13 20:25:24 | INFO   | db.py::get_latest_group_id()          | ‚úèÔ∏è Trying to get the latest group_id
2026-01-13 20:25:24 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups?select=group_id&order=group_id.desc&limit=1 "HTTP/1.1 200 OK"
2026-01-13 20:25:24 | INFO   | db.py::get_latest_group_id()          | Retrieved data=[] count=0 from db
2026-01-13 20:25:24 | INFO   | db.py::get_latest_group_id()          | No latest groupId found from group_orders table
2026-01-13 20:25:24 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:25:24 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768307124289, 'E': 1768307124290, 'o': {'s': 'SOLUSDT', 'c': 'aos_coin_7VFAIgtKAvo5wDpxssqV', 'S': 'BUY', 'o': 'MARKET', 'f': 'GTC', 'q': '0.04', 'p': '0', 'ap': '0', 'sp': '0', 'x': 'NEW', 'X': 'NEW', 'i': 189088390711, 'l': '0', 'z': '0', 'L': '0', 'n': '0', 'N': 'USDT', 'T': 1768307124289, 't': 0, 'b': '0', 'a': '0', 'm': False, 'R': False, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '0', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 20:25:24 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 189088390711, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '0.04', 'direction': 'LONG', 'created_at': 1768307124289}
2026-01-13 20:25:24 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders?select=%2A&order_id=eq.189088390711 "HTTP/1.1 200 OK"
2026-01-13 20:25:24 | INFO   | db.py::insertNewOrderByType()         | ‚úèÔ∏è Attempting to insert new order into DB... Order Type: MARKET
2026-01-13 20:25:24 | INFO   | db.py::insertNewOrderByType()         | Order Data: {'order_id': 189088390711, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '0.04', 'direction': 'LONG', 'created_at': 1768307124289}
2026-01-13 20:25:24 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders "HTTP/1.1 201 Created"
2026-01-13 20:25:24 | INFO   | db.py::get_latest_group_id()          | ‚úèÔ∏è Trying to get the latest group_id
2026-01-13 20:25:24 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups?select=group_id&order=group_id.desc&limit=1 "HTTP/1.1 200 OK"
2026-01-13 20:25:24 | INFO   | db.py::get_latest_group_id()          | Retrieved data=[] count=0 from db
2026-01-13 20:25:24 | INFO   | db.py::get_latest_group_id()          | No latest groupId found from group_orders table
2026-01-13 20:25:24 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:25:24 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ACCOUNT_UPDATE', 'T': 1768307124290, 'E': 1768307124290, 'a': {'B': [{'a': 'USDT', 'wb': '1820.41215559', 'cw': '1820.41215559', 'bc': '0'}], 'P': [{'s': 'SOLUSDT', 'pa': '0.04', 'ep': '141.87', 'cr': '740.63859975', 'up': '0', 'mt': 'cross', 'iw': '0', 'ps': 'BOTH', 'ma': 'USDT', 'bep': '141.940935'}], 'm': 'ORDER'}}
2026-01-13 20:25:24 | INFO   | event_handler.py::event_parser()      | Ignoring events of type ACCOUNT_UPDATE
2026-01-13 20:25:24 | INFO   | db.py::get_latest_group_id()          | ‚úèÔ∏è Trying to get the latest group_id
2026-01-13 20:25:24 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups?select=group_id&order=group_id.desc&limit=1 "HTTP/1.1 200 OK"
2026-01-13 20:25:24 | INFO   | db.py::get_latest_group_id()          | Retrieved data=[] count=0 from db
2026-01-13 20:25:24 | INFO   | db.py::get_latest_group_id()          | No latest groupId found from group_orders table
2026-01-13 20:25:24 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:25:24 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768307124289, 'E': 1768307124290, 'o': {'s': 'SOLUSDT', 'c': 'aos_coin_7VFAIgtKAvo5wDpxssqV', 'S': 'BUY', 'o': 'MARKET', 'f': 'GTC', 'q': '0.04', 'p': '0', 'ap': '141.87', 'sp': '0', 'x': 'TRADE', 'X': 'FILLED', 'i': 189088390711, 'l': '0.04', 'z': '0.04', 'L': '141.87', 'n': '0.0028374', 'N': 'USDT', 'T': 1768307124289, 't': 3075223848, 'b': '0', 'a': '0', 'm': False, 'R': False, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '0', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 20:25:24 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 189088390711, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '0.04', 'direction': 'LONG', 'ask_price': '141.87', 'filled_price': '141.87', 'updated_at': 1768307124289}
2026-01-13 20:25:24 | INFO   | db.py::findByIdAndUpdateFilledMarketOrder() | ‚úèÔ∏è Attempting to UPDATE order 189088390711 to FILLED
2026-01-13 20:25:24 | INFO   | _client.py::_send_single_request()    | HTTP Request: PATCH https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders?order_id=eq.189088390711 "HTTP/1.1 200 OK"
2026-01-13 20:25:24 | INFO   | db.py::getCandleData()                | ‚úèÔ∏è Trying to get candle data by order: 1111
2026-01-13 20:25:25 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_candles?select=%2A&order_id=eq.1111 "HTTP/1.1 200 OK"
2026-01-13 20:25:25 | INFO   | db.py::getCandleData()                | Returning {'order_id': 1111, 'candle_data': '{"open": "139.10", "high": "149.10", "low": "129.10", "close": "138.10"}', 'trade_metadata': '{"risk_amount": 10, "fee": 0.1, "portfolio_threshold": 20, "rv_period": 2, "ema_period": 9, "rv_threshold": 2.8, "trailing_percentage": 0.7}', 'created_at': '2026-01-13T12:04:36.551156+00:00'} from get_group_id_by_order function
2026-01-13 20:25:25 | INFO   | db.py::insertNewOrderGroup()          | ‚úèÔ∏è Trying to insert a new order_group record with params: {'group_id': 1, 'order_id': 189088390711, 'type': 'MARKET', 'direction': 'LONG', 'current_stop_loss': 129.1, 'trailing_value': 8.939000000000007, 'trailing_price': 150.80900000000003, 'next_stoploss_price': 138.039}
2026-01-13 20:25:25 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups "HTTP/1.1 201 Created"
2026-01-13 20:25:25 | INFO   | db.py::insertNewOrderGroup()          | Successfully inserted new entry with group_id 1 into order_group table.
2026-01-13 20:25:25 | INFO   | db.py::insertNewTrade()               | ‚úèÔ∏è Attempting to insert new trade into DB with group_id: 1, order_data: {'order_id': 189088390711, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '0.04', 'direction': 'LONG', 'ask_price': '141.87', 'filled_price': '141.87', 'updated_at': 1768307124289}
2026-01-13 20:25:25 | INFO   | db.py::insertNewTrade()               | New trade object: {'group_id': 1, 'symbol': 'SOLUSDT', 'direction': 'LONG', 'entry_time': '2026-01-13 20:25:24.289000', 'exit_time': None, 'entry_price': '141.87', 'exit_price': None, 'qty': '0.04', 'realized_pnl': None, 'is_closed': False, 'fees': None}
2026-01-13 20:25:25 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_trades "HTTP/1.1 201 Created"
2026-01-13 20:25:25 | INFO   | db.py::insertNewTrade()               | Successfully inserted new trade with group_id 1 into trades table.
2026-01-13 20:25:25 | INFO   | db.py::get_latest_group_id()          | ‚úèÔ∏è Trying to get the latest group_id
2026-01-13 20:25:25 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups?select=group_id&order=group_id.desc&limit=1 "HTTP/1.1 200 OK"
2026-01-13 20:25:25 | INFO   | db.py::get_latest_group_id()          | Retrieved data=[{'group_id': 1}] count=1 from db
2026-01-13 20:25:40 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:25:40 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ALGO_UPDATE', 'T': 1768307140896, 'E': 1768307140896, 'o': {'caid': 'YvQPenonFilqvzkHrqz2vn', 'aid': 1000000371159415, 'at': 'CONDITIONAL', 'o': 'STOP_MARKET', 's': 'SOLUSDT', 'S': 'SELL', 'ps': 'BOTH', 'f': 'GTC', 'q': '0.04', 'X': 'NEW', 'ai': '', 'tp': '136.12', 'p': '0', 'V': 'EXPIRE_MAKER', 'wt': 'CONTRACT_PRICE', 'pm': 'NONE', 'cp': False, 'pP': False, 'R': True, 'tt': 0, 'gtd': 0}}
2026-01-13 20:25:40 | INFO   | event_handler.py::_parse_SL_order()   | Successfully parsed event, returning: {'order_id': 1000000371159415, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'STOP_MARKET', 'qty': '0.04', 'direction': 'LONG', 'created_at': 1768307140896, 'ask_price': '136.12'}
2026-01-13 20:25:41 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders?select=%2A&order_id=eq.1000000371159415 "HTTP/1.1 200 OK"
2026-01-13 20:25:41 | INFO   | db.py::insertNewOrderByType()         | ‚úèÔ∏è Attempting to insert new order into DB... Order Type: STOP_MARKET
2026-01-13 20:25:41 | INFO   | db.py::insertNewOrderByType()         | Order Data: {'order_id': 1000000371159415, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'STOP_MARKET', 'qty': '0.04', 'direction': 'LONG', 'created_at': 1768307140896, 'ask_price': '136.12'}
2026-01-13 20:25:41 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders "HTTP/1.1 201 Created"
2026-01-13 20:25:41 | INFO   | db.py::getCandleData()                | ‚úèÔ∏è Trying to get candle data by order: 2222
2026-01-13 20:25:41 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_candles?select=%2A&order_id=eq.2222 "HTTP/1.1 200 OK"
2026-01-13 20:25:41 | INFO   | db.py::getCandleData()                | Returning {'order_id': 2222, 'candle_data': '{"open": "158.10", "high": "167.10", "low": "155.10", "close": "157.10"}', 'trade_metadata': '{"risk_amount": 10, "fee": 0.1, "portfolio_threshold": 20, "rv_period": 2, "ema_period": 9, "rv_threshold": 2.8, "trailing_percentage": 0.7}', 'created_at': '2026-01-13T12:04:36.613457+00:00'} from get_group_id_by_order function
2026-01-13 20:25:41 | INFO   | db.py::insertNewOrderGroup()          | ‚úèÔ∏è Trying to insert a new order_group record with params: {'group_id': 2, 'order_id': 1000000371159415, 'type': 'STOP_MARKET', 'direction': 'LONG', 'current_stop_loss': 155.1, 'trailing_value': -13.285999999999992, 'trailing_price': 122.83400000000002, 'next_stoploss_price': 141.814}
2026-01-13 20:25:41 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups "HTTP/1.1 201 Created"
2026-01-13 20:25:41 | INFO   | db.py::insertNewOrderGroup()          | Successfully inserted new entry with group_id 2 into order_group table.
2026-01-13 20:25:41 | INFO   | db.py::get_latest_group_id()          | ‚úèÔ∏è Trying to get the latest group_id
2026-01-13 20:25:41 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups?select=group_id&order=group_id.desc&limit=1 "HTTP/1.1 206 Partial Content"
2026-01-13 20:25:41 | INFO   | db.py::get_latest_group_id()          | Retrieved data=[{'group_id': 2}] count=2 from db
2026-01-13 20:32:14 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:32:14 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'TRADE_LITE', 'E': 1768307534684, 'T': 1768307534684, 's': 'SOLUSDT', 'q': '0.04', 'p': '0.0000', 'm': False, 'c': 'android_MENRNBnJ8C3CvodVMTJ4', 'S': 'SELL', 'L': '142.0500', 'l': '0.04', 't': 3075229212, 'i': 189089325357}
2026-01-13 20:32:14 | INFO   | event_handler.py::event_parser()      | Ignoring events of type TRADE_LITE
2026-01-13 20:32:14 | INFO   | db.py::get_latest_group_id()          | ‚úèÔ∏è Trying to get the latest group_id
2026-01-13 20:32:14 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups?select=group_id&order=group_id.desc&limit=1 "HTTP/1.1 206 Partial Content"
2026-01-13 20:32:14 | INFO   | db.py::get_latest_group_id()          | Retrieved data=[{'group_id': 2}] count=2 from db
2026-01-13 20:32:14 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:32:14 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768307534684, 'E': 1768307534685, 'o': {'s': 'SOLUSDT', 'c': 'android_MENRNBnJ8C3CvodVMTJ4', 'S': 'SELL', 'o': 'MARKET', 'f': 'GTC', 'q': '0.04', 'p': '0', 'ap': '0', 'sp': '0', 'x': 'NEW', 'X': 'NEW', 'i': 189089325357, 'l': '0', 'z': '0', 'L': '0', 'n': '0', 'N': 'USDT', 'T': 1768307534684, 't': 0, 'b': '0', 'a': '0', 'm': False, 'R': True, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '0', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 20:32:14 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 189089325357, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'MARKET', 'qty': '0.04', 'direction': 'SHORT', 'created_at': 1768307534684}
2026-01-13 20:32:15 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders?select=%2A&order_id=eq.189089325357 "HTTP/1.1 200 OK"
2026-01-13 20:32:15 | INFO   | db.py::insertNewOrderByType()         | ‚úèÔ∏è Attempting to insert new order into DB... Order Type: MARKET
2026-01-13 20:32:15 | INFO   | db.py::insertNewOrderByType()         | Order Data: {'order_id': 189089325357, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'MARKET', 'qty': '0.04', 'direction': 'SHORT', 'created_at': 1768307534684}
2026-01-13 20:32:15 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders "HTTP/1.1 201 Created"
2026-01-13 20:32:15 | INFO   | db.py::get_latest_group_id()          | ‚úèÔ∏è Trying to get the latest group_id
2026-01-13 20:32:15 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups?select=group_id&order=group_id.desc&limit=1 "HTTP/1.1 206 Partial Content"
2026-01-13 20:32:15 | INFO   | db.py::get_latest_group_id()          | Retrieved data=[{'group_id': 2}] count=2 from db
2026-01-13 20:32:15 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:32:15 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ACCOUNT_UPDATE', 'T': 1768307534684, 'E': 1768307534685, 'a': {'B': [{'a': 'USDT', 'wb': '1820.41651459', 'cw': '1820.41651459', 'bc': '0'}], 'P': [{'s': 'SOLUSDT', 'pa': '0', 'ep': '0', 'cr': '740.64579975', 'up': '0', 'mt': 'cross', 'iw': '0', 'ps': 'BOTH', 'ma': 'USDT', 'bep': '0'}], 'm': 'ORDER'}}
2026-01-13 20:32:15 | INFO   | event_handler.py::event_parser()      | Ignoring events of type ACCOUNT_UPDATE
2026-01-13 20:32:15 | INFO   | db.py::get_latest_group_id()          | ‚úèÔ∏è Trying to get the latest group_id
2026-01-13 20:32:15 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups?select=group_id&order=group_id.desc&limit=1 "HTTP/1.1 206 Partial Content"
2026-01-13 20:32:15 | INFO   | db.py::get_latest_group_id()          | Retrieved data=[{'group_id': 2}] count=2 from db
2026-01-13 20:32:15 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:32:15 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768307534684, 'E': 1768307534685, 'o': {'s': 'SOLUSDT', 'c': 'android_MENRNBnJ8C3CvodVMTJ4', 'S': 'SELL', 'o': 'MARKET', 'f': 'GTC', 'q': '0.04', 'p': '0', 'ap': '142.05', 'sp': '0', 'x': 'TRADE', 'X': 'FILLED', 'i': 189089325357, 'l': '0.04', 'z': '0.04', 'L': '142.05', 'n': '0.002841', 'N': 'USDT', 'T': 1768307534684, 't': 3075229212, 'b': '0', 'a': '0', 'm': False, 'R': True, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '0.0072', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 20:32:15 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 189089325357, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'MARKET', 'qty': '0.04', 'direction': 'SHORT', 'ask_price': '142.05', 'filled_price': '142.05', 'updated_at': 1768307534684}
2026-01-13 20:32:15 | INFO   | db.py::findByIdAndUpdateFilledMarketOrder() | ‚úèÔ∏è Attempting to UPDATE order 189089325357 to FILLED
2026-01-13 20:32:15 | INFO   | _client.py::_send_single_request()    | HTTP Request: PATCH https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders?order_id=eq.189089325357 "HTTP/1.1 200 OK"
2026-01-13 20:32:15 | INFO   | db.py::getCandleData()                | ‚úèÔ∏è Trying to get candle data by order: 1111
2026-01-13 20:32:15 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_candles?select=%2A&order_id=eq.1111 "HTTP/1.1 200 OK"
2026-01-13 20:32:15 | INFO   | db.py::getCandleData()                | Returning {'order_id': 1111, 'candle_data': '{"open": "139.10", "high": "149.10", "low": "129.10", "close": "138.10"}', 'trade_metadata': '{"risk_amount": 10, "fee": 0.1, "portfolio_threshold": 20, "rv_period": 2, "ema_period": 9, "rv_threshold": 2.8, "trailing_percentage": 0.7}', 'created_at': '2026-01-13T12:04:36.551156+00:00', 'group_id': 1} from get_group_id_by_order function
2026-01-13 20:32:15 | INFO   | db.py::insertNewOrderGroup()          | ‚úèÔ∏è Trying to insert a new order_group record with params: {'group_id': 3, 'order_id': 189089325357, 'type': 'MARKET', 'direction': 'SHORT', 'current_stop_loss': 149.1, 'trailing_value': 4.934999999999988, 'trailing_price': 137.115, 'next_stoploss_price': 144.16500000000002}
2026-01-13 20:32:15 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups "HTTP/1.1 201 Created"
2026-01-13 20:32:15 | INFO   | db.py::insertNewOrderGroup()          | Successfully inserted new entry with group_id 3 into order_group table.
2026-01-13 20:32:15 | INFO   | db.py::insertNewTrade()               | ‚úèÔ∏è Attempting to insert new trade into DB with group_id: 3, order_data: {'order_id': 189089325357, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'MARKET', 'qty': '0.04', 'direction': 'SHORT', 'ask_price': '142.05', 'filled_price': '142.05', 'updated_at': 1768307534684}
2026-01-13 20:32:15 | INFO   | db.py::insertNewTrade()               | New trade object: {'group_id': 3, 'symbol': 'SOLUSDT', 'direction': 'SHORT', 'entry_time': '2026-01-13 20:32:14.684000', 'exit_time': None, 'entry_price': '142.05', 'exit_price': None, 'qty': '0.04', 'realized_pnl': None, 'is_closed': False, 'fees': None}
2026-01-13 20:32:15 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_trades "HTTP/1.1 201 Created"
2026-01-13 20:32:15 | INFO   | db.py::insertNewTrade()               | Successfully inserted new trade with group_id 3 into trades table.
2026-01-13 20:32:15 | INFO   | db.py::get_latest_group_id()          | ‚úèÔ∏è Trying to get the latest group_id
2026-01-13 20:32:15 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups?select=group_id&order=group_id.desc&limit=1 "HTTP/1.1 206 Partial Content"
2026-01-13 20:32:15 | INFO   | db.py::get_latest_group_id()          | Retrieved data=[{'group_id': 3}] count=3 from db
2026-01-13 20:32:18 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:32:18 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ALGO_UPDATE', 'T': 1768307538939, 'E': 1768307538940, 'o': {'caid': 'YvQPenonFilqvzkHrqz2vn', 'aid': 1000000371159415, 'at': 'CONDITIONAL', 'o': 'STOP_MARKET', 's': 'SOLUSDT', 'S': 'SELL', 'ps': 'BOTH', 'f': 'GTC', 'q': '0.04', 'X': 'CANCELED', 'ai': '', 'tp': '136.12', 'p': '0', 'V': 'EXPIRE_MAKER', 'wt': 'CONTRACT_PRICE', 'pm': 'NONE', 'cp': False, 'pP': False, 'R': True, 'tt': 0, 'gtd': 0}}
2026-01-13 20:32:18 | INFO   | event_handler.py::_parse_SL_order()   | Successfully parsed event, returning: {'order_id': 1000000371159415, 'status': 'CANCELED', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'STOP_MARKET', 'qty': '0.04', 'direction': 'LONG', 'updated_at': 1768307538939}
2026-01-13 20:32:19 | INFO   | _client.py::_send_single_request()    | HTTP Request: PATCH https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders?order_id=eq.1000000371159415 "HTTP/1.1 200 OK"
2026-01-13 20:32:19 | INFO   | db.py::get_latest_group_id()          | ‚úèÔ∏è Trying to get the latest group_id
2026-01-13 20:32:19 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups?select=group_id&order=group_id.desc&limit=1 "HTTP/1.1 206 Partial Content"
2026-01-13 20:32:19 | INFO   | db.py::get_latest_group_id()          | Retrieved data=[{'group_id': 3}] count=3 from db
2026-01-13 20:32:26 | ERROR  | base_events.py::default_exception_handler() | Task was destroyed but it is pending!
task: <Task cancelling name='Task-2' coro=<websocket_binance_event_listener() running at /Users/lei/p/binance-event-listener/src/services/binanceWebsocket.py:48> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/miniconda3/envs/trading_bot/lib/python3.14/asyncio/tasks.py:991, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/miniconda3/envs/trading_bot/lib/python3.14/asyncio/tasks.py:810]>
2026-01-13 20:32:39 | INFO   | binanceWebsocket.py::websocket_binance_event_listener() | Connecting to wss://fstream.binance.com/ws/VyKbW5FXBdgRSxyND7ww4KdCTjpoAEyeqSBJbpCsOWQG1Li7YFGdQmLrg9yyIslv
2026-01-13 20:32:39 | INFO   | binanceWebsocket.py::websocket_binance_event_listener() | ‚úÖ Connected to Binance event listening websocket
2026-01-13 20:32:49 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:32:49 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'TRADE_LITE', 'E': 1768307569213, 'T': 1768307569213, 's': 'SOLUSDT', 'q': '0.04', 'p': '0.0000', 'm': False, 'c': 'aos_coin_PXgMckHZiT8WYQ3eirCL', 'S': 'BUY', 'L': '142.0300', 'l': '0.04', 't': 3075229978, 'i': 189089383551}
2026-01-13 20:32:49 | INFO   | event_handler.py::event_parser()      | Ignoring events of type TRADE_LITE
2026-01-13 20:32:49 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:32:49 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768307569213, 'E': 1768307569213, 'o': {'s': 'SOLUSDT', 'c': 'aos_coin_PXgMckHZiT8WYQ3eirCL', 'S': 'BUY', 'o': 'MARKET', 'f': 'GTC', 'q': '0.04', 'p': '0', 'ap': '0', 'sp': '0', 'x': 'NEW', 'X': 'NEW', 'i': 189089383551, 'l': '0', 'z': '0', 'L': '0', 'n': '0', 'N': 'USDT', 'T': 1768307569213, 't': 0, 'b': '0', 'a': '0', 'm': False, 'R': False, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '0', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 20:32:49 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 189089383551, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '0.04', 'direction': 'LONG', 'created_at': 1768307569213}
2026-01-13 20:32:49 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders?select=%2A&order_id=eq.189089383551 "HTTP/1.1 200 OK"
2026-01-13 20:32:49 | INFO   | db.py::insertNewOrderByType()         | ‚úèÔ∏è Attempting to insert new order into DB... Order Type: MARKET
2026-01-13 20:32:49 | INFO   | db.py::insertNewOrderByType()         | Order Data: {'order_id': 189089383551, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '0.04', 'direction': 'LONG', 'created_at': 1768307569213}
2026-01-13 20:32:49 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders "HTTP/1.1 201 Created"
2026-01-13 20:32:49 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:32:49 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ACCOUNT_UPDATE', 'T': 1768307569213, 'E': 1768307569213, 'a': {'B': [{'a': 'USDT', 'wb': '1820.41367399', 'cw': '1820.41367399', 'bc': '0'}], 'P': [{'s': 'SOLUSDT', 'pa': '0.04', 'ep': '142.03', 'cr': '740.64579975', 'up': '0', 'mt': 'cross', 'iw': '0', 'ps': 'BOTH', 'ma': 'USDT', 'bep': '142.101015'}], 'm': 'ORDER'}}
2026-01-13 20:32:49 | INFO   | event_handler.py::event_parser()      | Ignoring events of type ACCOUNT_UPDATE
2026-01-13 20:32:49 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:32:49 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768307569213, 'E': 1768307569213, 'o': {'s': 'SOLUSDT', 'c': 'aos_coin_PXgMckHZiT8WYQ3eirCL', 'S': 'BUY', 'o': 'MARKET', 'f': 'GTC', 'q': '0.04', 'p': '0', 'ap': '142.03', 'sp': '0', 'x': 'TRADE', 'X': 'FILLED', 'i': 189089383551, 'l': '0.04', 'z': '0.04', 'L': '142.03', 'n': '0.0028406', 'N': 'USDT', 'T': 1768307569213, 't': 3075229978, 'b': '0', 'a': '0', 'm': False, 'R': False, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '0', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 20:32:49 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 189089383551, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '0.04', 'direction': 'LONG', 'ask_price': '142.03', 'filled_price': '142.03', 'updated_at': 1768307569213}
2026-01-13 20:32:49 | INFO   | db.py::findByIdAndUpdateFilledMarketOrder() | ‚úèÔ∏è Attempting to UPDATE order 189089383551 to FILLED
2026-01-13 20:32:49 | INFO   | _client.py::_send_single_request()    | HTTP Request: PATCH https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders?order_id=eq.189089383551 "HTTP/1.1 200 OK"
2026-01-13 20:32:49 | INFO   | db.py::getCandleData()                | ‚úèÔ∏è Trying to get candle data by order: 1111
2026-01-13 20:32:49 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_candles?select=%2A&order_id=eq.1111 "HTTP/1.1 200 OK"
2026-01-13 20:32:49 | INFO   | db.py::getCandleData()                | Returning {'order_id': 1111, 'candle_data': '{"open": "139.10", "high": "149.10", "low": "129.10", "close": "138.10"}', 'trade_metadata': '{"risk_amount": 10, "fee": 0.1, "portfolio_threshold": 20, "rv_period": 2, "ema_period": 9, "rv_threshold": 2.8, "trailing_percentage": 0.7}', 'created_at': '2026-01-13T12:04:36.551156+00:00', 'group_id': 1} from get_group_id_by_order function
2026-01-13 20:32:49 | INFO   | db.py::insertNewOrderGroup()          | ‚úèÔ∏è Trying to insert a new order_group record with params: {'group_id': 1, 'order_id': 189089383551, 'type': 'MARKET', 'direction': 'LONG', 'current_stop_loss': 129.1, 'trailing_value': 9.051000000000004, 'trailing_price': 151.08100000000002, 'next_stoploss_price': 138.151}
2026-01-13 20:32:49 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups "HTTP/1.1 201 Created"
2026-01-13 20:32:49 | INFO   | db.py::insertNewOrderGroup()          | Successfully inserted new entry with group_id 1 into order_group table.
2026-01-13 20:32:49 | INFO   | db.py::insertNewTrade()               | ‚úèÔ∏è Attempting to insert new trade into DB with group_id: 1, order_data: {'order_id': 189089383551, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '0.04', 'direction': 'LONG', 'ask_price': '142.03', 'filled_price': '142.03', 'updated_at': 1768307569213}
2026-01-13 20:32:49 | INFO   | db.py::insertNewTrade()               | New trade object: {'group_id': 1, 'symbol': 'SOLUSDT', 'direction': 'LONG', 'entry_time': '2026-01-13 20:32:49.213000', 'exit_time': None, 'entry_price': '142.03', 'exit_price': None, 'qty': '0.04', 'realized_pnl': None, 'is_closed': False, 'fees': None}
2026-01-13 20:32:49 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_trades "HTTP/1.1 201 Created"
2026-01-13 20:32:49 | INFO   | db.py::insertNewTrade()               | Successfully inserted new trade with group_id 1 into trades table.
2026-01-13 20:32:59 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 20:32:59 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ALGO_UPDATE', 'T': 1768307579715, 'E': 1768307579716, 'o': {'caid': 'aNPDkKCOIlcGUvPISzDKp0', 'aid': 1000000371215554, 'at': 'CONDITIONAL', 'o': 'STOP_MARKET', 's': 'SOLUSDT', 'S': 'SELL', 'ps': 'BOTH', 'f': 'GTC', 'q': '0.04', 'X': 'NEW', 'ai': '', 'tp': '136.12', 'p': '0', 'V': 'EXPIRE_MAKER', 'wt': 'CONTRACT_PRICE', 'pm': 'NONE', 'cp': False, 'pP': False, 'R': True, 'tt': 0, 'gtd': 0}}
2026-01-13 20:32:59 | INFO   | event_handler.py::_parse_SL_order()   | Successfully parsed event, returning: {'order_id': 1000000371215554, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'STOP_MARKET', 'qty': '0.04', 'direction': 'LONG', 'created_at': 1768307579715, 'ask_price': '136.12'}
2026-01-13 20:32:59 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders?select=%2A&order_id=eq.1000000371215554 "HTTP/1.1 200 OK"
2026-01-13 20:32:59 | INFO   | db.py::insertNewOrderByType()         | ‚úèÔ∏è Attempting to insert new order into DB... Order Type: STOP_MARKET
2026-01-13 20:32:59 | INFO   | db.py::insertNewOrderByType()         | Order Data: {'order_id': 1000000371215554, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'STOP_MARKET', 'qty': '0.04', 'direction': 'LONG', 'created_at': 1768307579715, 'ask_price': '136.12'}
2026-01-13 20:32:59 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_orders "HTTP/1.1 201 Created"
2026-01-13 20:32:59 | INFO   | db.py::getCandleData()                | ‚úèÔ∏è Trying to get candle data by order: 2222
2026-01-13 20:32:59 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_candles?select=%2A&order_id=eq.2222 "HTTP/1.1 200 OK"
2026-01-13 20:32:59 | INFO   | db.py::getCandleData()                | Returning {'order_id': 2222, 'candle_data': '{"open": "158.10", "high": "167.10", "low": "155.10", "close": "157.10"}', 'trade_metadata': '{"risk_amount": 10, "fee": 0.1, "portfolio_threshold": 20, "rv_period": 2, "ema_period": 9, "rv_threshold": 2.8, "trailing_percentage": 0.7}', 'created_at': '2026-01-13T12:04:36.613457+00:00', 'group_id': 1} from get_group_id_by_order function
2026-01-13 20:32:59 | INFO   | db.py::insertNewOrderGroup()          | ‚úèÔ∏è Trying to insert a new order_group record with params: {'group_id': 1, 'order_id': 1000000371215554, 'type': 'STOP_MARKET', 'direction': 'LONG', 'current_stop_loss': 155.1, 'trailing_value': -13.285999999999992, 'trailing_price': 122.83400000000002, 'next_stoploss_price': 141.814}
2026-01-13 20:32:59 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/test_order_groups "HTTP/1.1 201 Created"
2026-01-13 20:32:59 | INFO   | db.py::insertNewOrderGroup()          | Successfully inserted new entry with group_id 1 into order_group table.
2026-01-13 20:33:31 | ERROR  | base_events.py::default_exception_handler() | Task was destroyed but it is pending!
task: <Task cancelling name='Task-2' coro=<websocket_binance_event_listener() running at /Users/lei/p/binance-event-listener/src/services/binanceWebsocket.py:48> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/miniconda3/envs/trading_bot/lib/python3.14/asyncio/tasks.py:991, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/miniconda3/envs/trading_bot/lib/python3.14/asyncio/tasks.py:810]>
