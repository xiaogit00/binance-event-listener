
task: <Task cancelling name='Task-2' coro=<websocket_binance_event_listener() running at /Users/lei/p/binance-event-listener/src/services/binanceWebsocket.py:48> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/miniconda3/envs/trading_bot/lib/python3.14/asyncio/tasks.py:991, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/miniconda3/envs/trading_bot/lib/python3.14/asyncio/tasks.py:810]>
2026-01-13 09:04:14 | INFO   | binanceWebsocket.py::websocket_binance_event_listener() | Connecting to wss://fstream.binance.com/ws/qm6ne3IaVAV1dBPc8wKVRpgHWy4CtWb1hk4ZhHDQUzFYv73EaMjHdMS0JSBAShxG
2026-01-13 09:04:14 | INFO   | binanceWebsocket.py::websocket_binance_event_listener() | ‚úÖ Connected to Binance event listening websocket
2026-01-13 09:04:51 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:04:51 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'TRADE_LITE', 'E': 1768266291138, 'T': 1768266291138, 's': 'SOLUSDT', 'q': '3.00', 'p': '0.0000', 'm': False, 'c': 'EwSGV2P62RehR3SAf0EU9m', 'S': 'BUY', 'L': '139.2000', 'l': '3.00', 't': 3074130698, 'i': 188999153836}
2026-01-13 09:04:51 | INFO   | event_handler.py::event_parser()      | Ignoring events of type TRADE_LITE
2026-01-13 09:04:51 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:04:51 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768266291138, 'E': 1768266291139, 'o': {'s': 'SOLUSDT', 'c': 'EwSGV2P62RehR3SAf0EU9m', 'S': 'BUY', 'o': 'MARKET', 'f': 'GTC', 'q': '3', 'p': '0', 'ap': '0', 'sp': '0', 'x': 'NEW', 'X': 'NEW', 'i': 188999153836, 'l': '0', 'z': '0', 'L': '0', 'n': '0', 'N': 'USDT', 'T': 1768266291138, 't': 0, 'b': '0', 'a': '0', 'm': False, 'R': False, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '0', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 09:04:51 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 188999153836, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '3', 'direction': 'LONG', 'created_at': 1768266291138}
2026-01-13 09:04:51 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/orders?select=%2A&order_id=eq.188999153836 "HTTP/1.1 200 OK"
2026-01-13 09:04:51 | INFO   | db.py::insertNewOrderByType()         | ‚úèÔ∏è Attempting to insert new order into DB... Order Type: MARKET
2026-01-13 09:04:51 | INFO   | db.py::insertNewOrderByType()         | Order Data: {'order_id': 188999153836, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '3', 'direction': 'LONG', 'created_at': 1768266291138}
2026-01-13 09:04:51 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/orders "HTTP/1.1 201 Created"
2026-01-13 09:04:51 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:04:51 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ACCOUNT_UPDATE', 'T': 1768266291138, 'E': 1768266291139, 'a': {'B': [{'a': 'USDT', 'wb': '1820.57540416', 'cw': '1820.57540416', 'bc': '0'}], 'P': [{'s': 'SOLUSDT', 'pa': '3', 'ep': '139.2', 'cr': '740.14899974', 'up': '0', 'mt': 'cross', 'iw': '0', 'ps': 'BOTH', 'ma': 'USDT', 'bep': '139.2696'}], 'm': 'ORDER'}}
2026-01-13 09:04:51 | INFO   | event_handler.py::event_parser()      | Ignoring events of type ACCOUNT_UPDATE
2026-01-13 09:04:51 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:04:51 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768266291138, 'E': 1768266291139, 'o': {'s': 'SOLUSDT', 'c': 'EwSGV2P62RehR3SAf0EU9m', 'S': 'BUY', 'o': 'MARKET', 'f': 'GTC', 'q': '3', 'p': '0', 'ap': '139.2', 'sp': '0', 'x': 'TRADE', 'X': 'FILLED', 'i': 188999153836, 'l': '3', 'z': '3', 'L': '139.2', 'n': '0.2088', 'N': 'USDT', 'T': 1768266291138, 't': 3074130698, 'b': '0', 'a': '0', 'm': False, 'R': False, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '0', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 09:04:51 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 188999153836, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '3', 'direction': 'LONG', 'ask_price': '139.2', 'filled_price': '139.2', 'updated_at': 1768266291138}
2026-01-13 09:04:51 | INFO   | db.py::findByIdAndUpdateFilledMarketOrder() | ‚úèÔ∏è Attempting to UPDATE order 188999153836 to FILLED
2026-01-13 09:04:51 | INFO   | _client.py::_send_single_request()    | HTTP Request: PATCH https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/orders?order_id=eq.188999153836 "HTTP/1.1 200 OK"
2026-01-13 09:05:01 | INFO   | db.py::get_group_id_by_order()        | ‚úèÔ∏è Trying to get latest group_id by order: 188999153836
2026-01-13 09:05:01 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups?select=%2A&order_id=eq.188999153836 "HTTP/1.1 200 OK"
2026-01-13 09:05:01 | INFO   | main.py::main()                       | No group_id found for order, inserting a new order_groups with group_id = -1
2026-01-13 09:05:01 | INFO   | main.py::main()                       | Potential edge case? - Current flow doesn't work if events happen within 10 seconds due to various sleeps.
2026-01-13 09:05:01 | INFO   | db.py::insertNewOrderGroup()          | ‚úèÔ∏è Trying to insert a new order_group record with params: {'group_id': -1, 'order_id': 188999153836, 'type': 'MO', 'direction': 'LONG', 'current_stop_loss': None, 'trailing_value': None, 'trailing_price': None, 'next_stoploss_price': None, 'created_at': '2026-01-13 09:04:51.138000'}
2026-01-13 09:05:01 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups "HTTP/1.1 409 Conflict"
2026-01-13 09:05:01 | INFO   | db.py::insertNewTrade()               | ‚úèÔ∏è Attempting to insert new trade into DB with group_id: -1, order_data: {'order_id': 188999153836, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '3', 'direction': 'LONG', 'ask_price': '139.2', 'filled_price': '139.2', 'updated_at': 1768266291138}
2026-01-13 09:05:01 | INFO   | db.py::insertNewTrade()               | New trade object: {'group_id': -1, 'symbol': 'SOLUSDT', 'direction': 'LONG', 'entry_time': '2026-01-13 09:04:51.138000', 'exit_time': None, 'entry_price': '139.2', 'exit_price': None, 'qty': '3', 'realized_pnl': None, 'is_closed': False, 'fees': None}
2026-01-13 09:05:01 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/trades "HTTP/1.1 201 Created"
2026-01-13 09:05:01 | INFO   | db.py::insertNewTrade()               | Successfully inserted new trade with group_id -1 into trades table.
2026-01-13 09:09:08 | ERROR  | base_events.py::default_exception_handler() | Task was destroyed but it is pending!
task: <Task cancelling name='Task-2' coro=<websocket_binance_event_listener() running at /Users/lei/p/binance-event-listener/src/services/binanceWebsocket.py:48> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/miniconda3/envs/trading_bot/lib/python3.14/asyncio/tasks.py:991, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/miniconda3/envs/trading_bot/lib/python3.14/asyncio/tasks.py:810]>
2026-01-13 09:09:30 | INFO   | binanceWebsocket.py::websocket_binance_event_listener() | Connecting to wss://fstream.binance.com/ws/qm6ne3IaVAV1dBPc8wKVRpgHWy4CtWb1hk4ZhHDQUzFYv73EaMjHdMS0JSBAShxG
2026-01-13 09:09:31 | INFO   | binanceWebsocket.py::websocket_binance_event_listener() | ‚úÖ Connected to Binance event listening websocket
2026-01-13 09:09:42 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:09:42 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'TRADE_LITE', 'E': 1768266582821, 'T': 1768266582821, 's': 'SOLUSDT', 'q': '3.00', 'p': '0.0000', 'm': False, 'c': 'FJSt06BnaK7EBaZ04CFwLd', 'S': 'BUY', 'L': '139.4300', 'l': '3.00', 't': 3074137963, 'i': 188999740044}
2026-01-13 09:09:42 | INFO   | event_handler.py::event_parser()      | Ignoring events of type TRADE_LITE
2026-01-13 09:09:42 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:09:42 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768266582821, 'E': 1768266582822, 'o': {'s': 'SOLUSDT', 'c': 'FJSt06BnaK7EBaZ04CFwLd', 'S': 'BUY', 'o': 'MARKET', 'f': 'GTC', 'q': '3', 'p': '0', 'ap': '0', 'sp': '0', 'x': 'NEW', 'X': 'NEW', 'i': 188999740044, 'l': '0', 'z': '0', 'L': '0', 'n': '0', 'N': 'USDT', 'T': 1768266582821, 't': 0, 'b': '0', 'a': '0', 'm': False, 'R': False, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '0', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 09:09:42 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 188999740044, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '3', 'direction': 'LONG', 'created_at': 1768266582821}
2026-01-13 09:09:43 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/orders?select=%2A&order_id=eq.188999740044 "HTTP/1.1 200 OK"
2026-01-13 09:09:43 | INFO   | db.py::insertNewOrderByType()         | ‚úèÔ∏è Attempting to insert new order into DB... Order Type: MARKET
2026-01-13 09:09:43 | INFO   | db.py::insertNewOrderByType()         | Order Data: {'order_id': 188999740044, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '3', 'direction': 'LONG', 'created_at': 1768266582821}
2026-01-13 09:09:43 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/orders "HTTP/1.1 201 Created"
2026-01-13 09:09:43 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:09:43 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ACCOUNT_UPDATE', 'T': 1768266582822, 'E': 1768266582822, 'a': {'B': [{'a': 'USDT', 'wb': '1820.72717418', 'cw': '1820.72717418', 'bc': '0'}], 'P': [{'s': 'SOLUSDT', 'pa': '3', 'ep': '139.43', 'cr': '740.71899974', 'up': '-0.03', 'mt': 'cross', 'iw': '0', 'ps': 'BOTH', 'ma': 'USDT', 'bep': '139.499715'}], 'm': 'ORDER'}}
2026-01-13 09:09:43 | INFO   | event_handler.py::event_parser()      | Ignoring events of type ACCOUNT_UPDATE
2026-01-13 09:09:43 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:09:43 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768266582821, 'E': 1768266582822, 'o': {'s': 'SOLUSDT', 'c': 'FJSt06BnaK7EBaZ04CFwLd', 'S': 'BUY', 'o': 'MARKET', 'f': 'GTC', 'q': '3', 'p': '0', 'ap': '139.43', 'sp': '0', 'x': 'TRADE', 'X': 'FILLED', 'i': 188999740044, 'l': '3', 'z': '3', 'L': '139.43', 'n': '0.209145', 'N': 'USDT', 'T': 1768266582821, 't': 3074137963, 'b': '0', 'a': '0', 'm': False, 'R': False, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '0', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 09:09:43 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 188999740044, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '3', 'direction': 'LONG', 'ask_price': '139.43', 'filled_price': '139.43', 'updated_at': 1768266582821}
2026-01-13 09:09:43 | INFO   | db.py::findByIdAndUpdateFilledMarketOrder() | ‚úèÔ∏è Attempting to UPDATE order 188999740044 to FILLED
2026-01-13 09:09:43 | INFO   | _client.py::_send_single_request()    | HTTP Request: PATCH https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/orders?order_id=eq.188999740044 "HTTP/1.1 200 OK"
2026-01-13 09:09:53 | INFO   | db.py::get_group_id_by_order()        | ‚úèÔ∏è Trying to get latest group_id by order: 188999740044
2026-01-13 09:09:53 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups?select=%2A&order_id=eq.188999740044 "HTTP/1.1 200 OK"
2026-01-13 09:09:53 | INFO   | main.py::main()                       | No group_id found for order, inserting a new order_groups with group_id = -1
2026-01-13 09:09:53 | INFO   | main.py::main()                       | Potential edge case? - Current flow doesn't work if events happen within 10 seconds due to various sleeps.
2026-01-13 09:09:53 | INFO   | db.py::insertNewOrderGroup()          | ‚úèÔ∏è Trying to insert a new order_group record with params: {'group_id': -1, 'order_id': 188999740044, 'type': 'MO', 'direction': 'LONG', 'current_stop_loss': None, 'trailing_value': None, 'trailing_price': None, 'next_stoploss_price': None, 'created_at': '2026-01-13 09:09:42.821000'}
2026-01-13 09:09:53 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups "HTTP/1.1 409 Conflict"
2026-01-13 09:09:53 | INFO   | db.py::insertNewTrade()               | ‚úèÔ∏è Attempting to insert new trade into DB with group_id: -1, order_data: {'order_id': 188999740044, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'BUY', 'type': 'MARKET', 'qty': '3', 'direction': 'LONG', 'ask_price': '139.43', 'filled_price': '139.43', 'updated_at': 1768266582821}
2026-01-13 09:09:53 | INFO   | db.py::insertNewTrade()               | New trade object: {'group_id': -1, 'symbol': 'SOLUSDT', 'direction': 'LONG', 'entry_time': '2026-01-13 09:09:42.821000', 'exit_time': None, 'entry_price': '139.43', 'exit_price': None, 'qty': '3', 'realized_pnl': None, 'is_closed': False, 'fees': None}
2026-01-13 09:09:53 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/trades "HTTP/1.1 201 Created"
2026-01-13 09:09:53 | INFO   | db.py::insertNewTrade()               | Successfully inserted new trade with group_id -1 into trades table.
2026-01-13 09:12:22 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:12:22 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'TRADE_LITE', 'E': 1768266742848, 'T': 1768266742848, 's': 'SOLUSDT', 'q': '3.00', 'p': '0.0000', 'm': False, 'c': 'android_nxgTR8DeDZxfMsoWQRs6', 'S': 'SELL', 'L': '139.4000', 'l': '2.25', 't': 3074140498, 'i': 189000096494}
2026-01-13 09:12:22 | INFO   | event_handler.py::event_parser()      | Ignoring events of type TRADE_LITE
2026-01-13 09:12:22 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:12:22 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'TRADE_LITE', 'E': 1768266742848, 'T': 1768266742848, 's': 'SOLUSDT', 'q': '3.00', 'p': '0.0000', 'm': False, 'c': 'android_nxgTR8DeDZxfMsoWQRs6', 'S': 'SELL', 'L': '139.4000', 'l': '0.75', 't': 3074140499, 'i': 189000096494}
2026-01-13 09:12:22 | INFO   | event_handler.py::event_parser()      | Ignoring events of type TRADE_LITE
2026-01-13 09:12:22 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:12:22 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768266742848, 'E': 1768266742848, 'o': {'s': 'SOLUSDT', 'c': 'android_nxgTR8DeDZxfMsoWQRs6', 'S': 'SELL', 'o': 'MARKET', 'f': 'GTC', 'q': '3', 'p': '0', 'ap': '0', 'sp': '0', 'x': 'NEW', 'X': 'NEW', 'i': 189000096494, 'l': '0', 'z': '0', 'L': '0', 'n': '0', 'N': 'USDT', 'T': 1768266742848, 't': 0, 'b': '0', 'a': '0', 'm': False, 'R': True, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '0', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 09:12:22 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 189000096494, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'MARKET', 'qty': '3', 'direction': 'SHORT', 'created_at': 1768266742848}
2026-01-13 09:12:23 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/orders?select=%2A&order_id=eq.189000096494 "HTTP/1.1 200 OK"
2026-01-13 09:12:23 | INFO   | db.py::insertNewOrderByType()         | ‚úèÔ∏è Attempting to insert new order into DB... Order Type: MARKET
2026-01-13 09:12:23 | INFO   | db.py::insertNewOrderByType()         | Order Data: {'order_id': 189000096494, 'status': 'NEW', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'MARKET', 'qty': '3', 'direction': 'SHORT', 'created_at': 1768266742848}
2026-01-13 09:12:23 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/orders "HTTP/1.1 201 Created"
2026-01-13 09:12:23 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:12:23 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ACCOUNT_UPDATE', 'T': 1768266742848, 'E': 1768266742848, 'a': {'B': [{'a': 'USDT', 'wb': '1820.50284918', 'cw': '1820.50284918', 'bc': '0'}], 'P': [{'s': 'SOLUSDT', 'pa': '0.75', 'ep': '139.43', 'cr': '740.65149974', 'up': '-0.0225', 'mt': 'cross', 'iw': '0', 'ps': 'BOTH', 'ma': 'USDT', 'bep': '140.00796'}], 'm': 'ORDER'}}
2026-01-13 09:12:23 | INFO   | event_handler.py::event_parser()      | Ignoring events of type ACCOUNT_UPDATE
2026-01-13 09:12:23 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:12:23 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768266742848, 'E': 1768266742848, 'o': {'s': 'SOLUSDT', 'c': 'android_nxgTR8DeDZxfMsoWQRs6', 'S': 'SELL', 'o': 'MARKET', 'f': 'GTC', 'q': '3', 'p': '0', 'ap': '139.4', 'sp': '0', 'x': 'TRADE', 'X': 'PARTIALLY_FILLED', 'i': 189000096494, 'l': '2.25', 'z': '2.25', 'L': '139.4', 'n': '0.156825', 'N': 'USDT', 'T': 1768266742848, 't': 3074140498, 'b': '0', 'a': '0', 'm': False, 'R': True, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '-0.0675', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 09:12:23 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 189000096494, 'status': 'PARTIALLY_FILLED', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'MARKET', 'qty': '3', 'direction': 'SHORT'}
2026-01-13 09:12:23 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:12:23 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ACCOUNT_UPDATE', 'T': 1768266742848, 'E': 1768266742848, 'a': {'B': [{'a': 'USDT', 'wb': '1820.42807419', 'cw': '1820.42807419', 'bc': '0'}], 'P': [{'s': 'SOLUSDT', 'pa': '0', 'ep': '0', 'cr': '740.62899975', 'up': '0', 'mt': 'cross', 'iw': '0', 'ps': 'BOTH', 'ma': 'USDT', 'bep': '0'}], 'm': 'ORDER'}}
2026-01-13 09:12:23 | INFO   | event_handler.py::event_parser()      | Ignoring events of type ACCOUNT_UPDATE
2026-01-13 09:12:23 | INFO   | main.py::main()                       | üî¥ Awaiting next event in queue from Binance event websocket...
2026-01-13 09:12:23 | INFO   | main.py::main()                       | üò± Received new Binance event! Event: {'e': 'ORDER_TRADE_UPDATE', 'T': 1768266742848, 'E': 1768266742848, 'o': {'s': 'SOLUSDT', 'c': 'android_nxgTR8DeDZxfMsoWQRs6', 'S': 'SELL', 'o': 'MARKET', 'f': 'GTC', 'q': '3', 'p': '0', 'ap': '139.4', 'sp': '0', 'x': 'TRADE', 'X': 'FILLED', 'i': 189000096494, 'l': '0.75', 'z': '3', 'L': '139.4', 'n': '0.052275', 'N': 'USDT', 'T': 1768266742848, 't': 3074140499, 'b': '0', 'a': '0', 'm': False, 'R': True, 'wt': 'CONTRACT_PRICE', 'ot': 'MARKET', 'ps': 'BOTH', 'cp': False, 'rp': '-0.02249999', 'pP': False, 'si': 0, 'ss': 0, 'V': 'EXPIRE_MAKER', 'pm': 'NONE', 'gtd': 0, 'er': '0'}}
2026-01-13 09:12:23 | INFO   | event_handler.py::_parse_MO_order()   | Successfully parsed event, returning: {'order_id': 189000096494, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'MARKET', 'qty': '3', 'direction': 'SHORT', 'ask_price': '139.4', 'filled_price': '139.4', 'updated_at': 1768266742848}
2026-01-13 09:12:23 | INFO   | db.py::findByIdAndUpdateFilledMarketOrder() | ‚úèÔ∏è Attempting to UPDATE order 189000096494 to FILLED
2026-01-13 09:12:23 | INFO   | _client.py::_send_single_request()    | HTTP Request: PATCH https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/orders?order_id=eq.189000096494 "HTTP/1.1 200 OK"
2026-01-13 09:12:33 | INFO   | db.py::get_group_id_by_order()        | ‚úèÔ∏è Trying to get latest group_id by order: 189000096494
2026-01-13 09:12:33 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups?select=%2A&order_id=eq.189000096494 "HTTP/1.1 200 OK"
2026-01-13 09:12:33 | INFO   | db.py::get_group_id_by_order()        | No associated group_id found for order_id: 189000096494
2026-01-13 09:12:33 | INFO   | main.py::main()                       | No group_id found for order, inserting a new order_groups with group_id = -2
2026-01-13 09:12:33 | INFO   | main.py::main()                       | Potential edge case? - Current flow doesn't work if events happen within 10 seconds due to various sleeps.
2026-01-13 09:12:33 | INFO   | db.py::insertNewOrderGroup()          | ‚úèÔ∏è Trying to insert a new order_group record with params: {'group_id': -2, 'order_id': 189000096494, 'type': 'MO', 'direction': 'SHORT', 'current_stop_loss': None, 'trailing_value': None, 'trailing_price': None, 'next_stoploss_price': None, 'created_at': '2026-01-13 09:12:22.848000'}
2026-01-13 09:12:33 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups "HTTP/1.1 201 Created"
2026-01-13 09:12:33 | INFO   | db.py::insertNewOrderGroup()          | Successfully inserted new entry with group_id -2 into order_group table.
2026-01-13 09:12:33 | INFO   | db.py::insertNewTrade()               | ‚úèÔ∏è Attempting to insert new trade into DB with group_id: -2, order_data: {'order_id': 189000096494, 'status': 'FILLED', 'symbol': 'SOLUSDT', 'side': 'SELL', 'type': 'MARKET', 'qty': '3', 'direction': 'SHORT', 'ask_price': '139.4', 'filled_price': '139.4', 'updated_at': 1768266742848}
2026-01-13 09:12:33 | INFO   | db.py::insertNewTrade()               | New trade object: {'group_id': -2, 'symbol': 'SOLUSDT', 'direction': 'SHORT', 'entry_time': '2026-01-13 09:12:22.848000', 'exit_time': None, 'entry_price': '139.4', 'exit_price': None, 'qty': '3', 'realized_pnl': None, 'is_closed': False, 'fees': None}
2026-01-13 09:12:33 | INFO   | _client.py::_send_single_request()    | HTTP Request: POST https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/trades "HTTP/1.1 201 Created"
2026-01-13 09:12:33 | INFO   | db.py::insertNewTrade()               | Successfully inserted new trade with group_id -2 into trades table.
2026-01-13 09:12:42 | ERROR  | base_events.py::default_exception_handler() | Task was destroyed but it is pending!
task: <Task cancelling name='Task-2' coro=<websocket_binance_event_listener() running at /Users/lei/p/binance-event-listener/src/services/binanceWebsocket.py:48> wait_for=<Future pending cb=[shield.<locals>._outer_done_callback() at /opt/miniconda3/envs/trading_bot/lib/python3.14/asyncio/tasks.py:991, Task.task_wakeup()]> cb=[gather.<locals>._done_callback() at /opt/miniconda3/envs/trading_bot/lib/python3.14/asyncio/tasks.py:810]>
2026-01-13 14:03:15 | INFO   | db.py::get_group_id_by_order()        | ‚úèÔ∏è Trying to get latest group_id by order: 189000096494
2026-01-13 14:03:15 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups?select=%2A&order_id=eq.189000096494 "HTTP/1.1 200 OK"
2026-01-13 14:03:40 | INFO   | db.py::get_group_id_by_order()        | ‚úèÔ∏è Trying to get latest group_id by order: 189000096494
2026-01-13 14:03:40 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups?select=%2A&order_id=eq.189000096494 "HTTP/1.1 200 OK"
2026-01-13 14:03:44 | INFO   | db.py::get_group_id_by_order()        | ‚úèÔ∏è Trying to get latest group_id by order: 189000096494
2026-01-13 14:03:44 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups?select=%2A&order_id=eq.189000096494 "HTTP/1.1 200 OK"
2026-01-13 14:04:03 | INFO   | db.py::get_group_id_by_order()        | ‚úèÔ∏è Trying to get latest group_id by order: 189000096494
2026-01-13 14:04:03 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups?select=%2A&order_id=eq.189000096494 "HTTP/1.1 200 OK"
2026-01-13 14:04:16 | INFO   | db.py::get_group_id_by_order()        | ‚úèÔ∏è Trying to get latest group_id by order: 189000096494
2026-01-13 14:04:16 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups?select=%2A&order_id=eq.189000096494 "HTTP/1.1 200 OK"
2026-01-13 14:12:10 | INFO   | db.py::get_group_id_by_order()        | ‚úèÔ∏è Trying to get latest group_id by order: 188999740044
2026-01-13 14:12:10 | INFO   | _client.py::_send_single_request()    | HTTP Request: GET https://dpiygxjxrqliujdupyxf.supabase.co/rest/v1/order_groups?select=%2A&order_id=eq.188999740044 "HTTP/1.1 200 OK"
2026-01-13 14:12:10 | INFO   | db.py::get_group_id_by_order()        | Returning 0 from get_group_id_by_order function
